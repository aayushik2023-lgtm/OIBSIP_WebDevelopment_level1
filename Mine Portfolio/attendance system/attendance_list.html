<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Attendance List</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-image:url(bg.jpg);
    margin: 0; padding: 0;
    display: flex;
    justify-content: center;
    min-height: 100vh;
  }
  .container {
    max-width: 700px;
    background: white;
    padding: 20px 30px 30px 30px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    margin: 40px 10px;
    border-radius: 8px;
    width: 100%;
  }
  h1 {
    text-align: center;
    color: #333;
    margin-bottom: 20px;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 10px;
  }
  th, td {
    border: 1px solid #ddd;
    padding: 10px;
    text-align: center;
  }
  th {
    background-color: #007bff;
    color: white;
  }
  .buttons {
    margin-top: 20px;
    display: flex;
    justify-content: space-between;
  }
  .buttons a, .buttons button {
    font-size: 16px;
    padding: 10px 20px;
    border-radius: 4px;
    border: none;
    cursor: pointer;
    text-decoration: none;
    text-align: center;
  }
  a {
    background-color: #007bff;
    color: white;
  }
  a:hover {
    background-color: #0056b3;
  }
  button {
    background-color: #dc3545;
    color: white;
  }
  button:hover {
    background-color: #a71d2a;
  }
  @media (max-width: 500px) {
    .container {
      padding: 15px 20px 20px 20px;
    }
    .buttons {
      flex-direction: column;
      gap: 10px;
    }
  }
</style>
</head>
<body>
<div class="container">
  <h1>Attendance List</h1>
  <table>
    <thead>
      <tr>
        <th>Student Name</th>
        <th>Roll Number</th>
        <th>Entry Timing</th>
        <th>Date</th>
      </tr>
    </thead>
    <tbody id="attendance-tbody">
    </tbody>
  </table>
  <div class="buttons">
    <a href="attendance_form.html">Add Attendance</a>
    <a href="clear_attendance.html">Clear Attendance List</a>
  </div>
</div>

<script>
  (function(){
    const tbody = document.getElementById('attendance-tbody');
    const STORAGE_KEY = 'attendance_list';

    function getRecords(){
      const raw = localStorage.getItem(STORAGE_KEY);
      return raw ? JSON.parse(raw) : [];
    }

    function renderList(){
      const records = getRecords();
      tbody.innerHTML = '';
      if(records.length === 0){
        const tr = document.createElement('tr');
        const td = document.createElement('td');
        td.colSpan = 4;
        td.style.textAlign = 'center';
        td.textContent = 'No attendance records found.';
        tr.appendChild(td);
        tbody.appendChild(tr);
        return;
      }
      // Sort records by date then roll number
      records.sort((a,b)=>{
        if(a.attendanceDate < b.attendanceDate) return -1;
        if(a.attendanceDate > b.attendanceDate) return 1;
        if(a.rollNumber < b.rollNumber) return -1;
        if(a.rollNumber > b.rollNumber) return 1;
        return 0;
      });
      for(const rec of records){
        const tr = document.createElement('tr');
        const tdName = document.createElement('td');
        tdName.textContent = rec.studentName;
        const tdRoll = document.createElement('td');
        tdRoll.textContent = rec.rollNumber;
        const tdEntry = document.createElement('td');
        tdEntry.textContent = rec.entryTime;
        const tdDate = document.createElement('td');
        tdDate.textContent = rec.attendanceDate;
        tr.appendChild(tdName);
        tr.appendChild(tdRoll);
        tr.appendChild(tdEntry);
        tr.appendChild(tdDate);
        tbody.appendChild(tr);
      }
    }
    renderList();
  })();
</script>
</body>
</html> 